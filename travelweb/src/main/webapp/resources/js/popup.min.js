/**
 * 노랑풍선 Web UX Popup 스크립트 Framework
 * v.1.9
 * ----------------------------------------------------------------------
 * 작성자		: kgi0412
 * 최종수정일	: 2021.08.10
 * ----------------------------------------------------------------------
 */
!function(t) {
    t.extend({
        _YBPopup: function(e, o) {
            var n = {
                _objKey: "ybPopup",
                element: e,
                print: !1,
                onPrint: null,
                resetClosed: !1,
                isTabContent: !1
            };
            o = t.extend(!0, this, n, o);
            var p = e.find(".popup_block");
            o.size || (p.hasClass("small") && (o.size = "small"),
            p.hasClass("regular") && (o.size = "regular"),
            p.hasClass("large") && (o.size = "large"),
            o.size || (o.size = "regular")),
            p.removeClass("small, regular, large").addClass(o.size),
            e.data(o._objKey, this),
            this._layerShow = function() {
                o.title && "string" === t.type(o.title) && e.find(".tit_popup").text(o.title),
                o.isTabContent && e.find(".tit_popup").addClass("poptit_noline"),
                o.print && e.find("button.btn_print").off("click").on("click", function() {
                    var e = o.onPrint;
                    "function" === t.type(e) ? e() : window.print()
                }),
                t("html").addClass("scroll_hidden"),
                e.show(),
                e.find(".popup_block").height() > e.outerHeight(!0) + 100 && e.scroll(function(e) {
                    var o = t(this).find(".popup_top")
                      , n = o.height();
                    t(this).scrollTop() > n ? o.addClass("top_fixed") : o.removeClass("top_fixed")
                });
                var n = this;
                e.find(".btn_pop_close").off("click").on("click", function() {
                    n.close()
                });
                var p = o.afterOpened;
                "function" === t.type(p) && p()
            }
            ,
            this.open = function() {
                var n = t("div.popup_wrap");
                if (t.each(n, function(e, o) {
                    var n = t(o)
                      , p = n.data(this._objKey).ybPopup;
                    n.is(":visible") && p && "function" === t.type(p.close) ? p.close() : n.hide()
                }),
                o.resetClosed && "object" === t.type(o.contents)) {
                    if (!/\/([^#\s\?]*)/.test(o.contents.url))
                        return t.ybLog.e(t._YBPopup._objKey, "옵션(contents.url)을 확인하세요."),
                        !1;
                    var p = this;
                    e.find(".popup_area").load(o.contents.url, o.contents.data, function() {
                        p._layerShow()
                    })
                } else
                    this._layerShow();
                return !0
            }
            ,
            this.close = function() {
                o.resetClosed && e.find(".popup_area").empty(),
                t("html").removeClass("scroll_hidden"),
                t(".popup_wrap").hide();
                var n = o.afterClosed;
                "function" === t.type(n) && n()
            }
        },
        _YBPopupContentsBlock: function(e) {
            var o = e.title && "string" === t.type(e.title) ? t("<h2/>", {
                class: "tit_popup"
            }) : ""
              , n = t("<button/>", {
                type: "button",
                class: "btn_pop_close"
            }).append(t("<span/>").text("레이어팝업 닫기"))
              , p = t("<div/>", {
                class: "popup_top"
            }).append(o, n)
              , s = t("<div/>", {
                class: "popup_area"
            });
            if (e.resetClosed) {
                var i = t("<p/>").text("Loading...");
                s.append(i)
            } else
                s.load(e.contents.url, e.contents.data);
            var a = t("<div/>", {
                class: "popup_block"
            }).append(p, s);
            return e.print && a.addClass("popup_print"),
            e.type && a.addClass(e.type),
            t("<div/>", {
                class: "popup_wrap"
            }).append(a).hide().appendTo("body")
        },
        ybPopup: function(e, o) {
            var n, p;
            if ("string" === t.type(e) ? (n = t(e),
            o && "object" === t.type(o) && (p = o)) : "object" === t.type(e) ? (p = e).contents || t.ybLog.e(t._YBPopup._objKey, "options.contents 선택자를 지정해 주세요.") : t.ybLog.e(t._YBPopup._objKey, "첫번째 인자를 확인하세요."),
            p && p.contents)
                if ("string" === t.type(p.contents))
                    n = t(p.contents);
                else if ("object" === t.type(p.contents)) {
                    /\/([^#\s\?]*)/.test(p.contents.url) ? ("boolean" !== t.type(p.resetClosed) && (p.resetClosed = !0),
                    n = t._YBPopupContentsBlock(p)) : t.ybLog.e(t._YBPopup._objKey, "옵션(contents.url)을 확인하세요.")
                }
            return n && n.ybPopup(p).data("ybPopup")
        }
    }),
    t.fn.extend({
        ybPopup: function(e) {
            return this.each(function(o, n) {
                new t._YBPopup(t(n),e)
            })
        }
    })
}(jQuery);
